<!DOCTYPE html>
<html lang="en">

<body>

  <div class="container">
    <div class="row">
      <div class="col-md-2"></div>
        <div class="col-md-10">
            <h3 class="text-center mb-4">Configuration List</h3><div></div>
            <div class="container">
              <div class="row mb-8 justify-content-center">
                <div class="col-md-12">
                    <form class="form-inline" #inspectionForm="ngForm" (ngSubmit)="onSearch()">

                      <div class="form-group mr-md-4"> 
                        <label class="col-form-label mr-2">Status</label>
                        <select class="form-control" name="isStatus" [(ngModel)]="isStatus">
                            <option value="" selected>---Select Status---</option>
                            <option value="1">Active</option>
                            <option value="2">Deactive</option>
                        </select>
                    </div>

                        <div class="form-group mr-md-4"> 
                            <label class="col-form-label mr-2">From Date</label>
                            <input type="date" class="form-control" name="startDate" [(ngModel)]="startDate" placeholder="From Date">
                        </div>
                        <div class="form-group mr-md-4"> 
                            <label class="col-form-label mr-4">To Date</label>
                            <input type="date" class="form-control" name="endDate" [(ngModel)]="endDate" placeholder="To Date">
                        </div>
                        
                      
                        <div class="form-group">
                            <button type="submit" name="search" class="btn btn-primary">Search</button>
                        </div>
                    </form>
                </div>
            
            
              </div>
          </div>
          <div></div>
          <div class="mt-4" *ngIf="configrationData && !isNorecordFound">
           <table class="table">
              <thead>
                <tr>
                  <th>SlNo</th>
                  <th>Module Name</th>
                 <!-- <th>Status</th>-->
                  <th>Start Date</th>
                  <th>End Date</th>
                  <th>Reason</th>
                  <th>Update status</th>
                  <th>Delete</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let config of resultListData; let i = index">
                  <!--<td>{{ config.InspectionConfigrationId }}</td>-->
                  <td>{{ i + 1 }}</td>
                  <td>{{ config.moduleName }}</td>
                <!--  <td>
                    <span *ngIf="config.isStatus === 1">Active</span>
                    <span *ngIf="config.isStatus === 2">Deactive</span>
                  </td> -->
                  <td>{{ config.startDate ? config.startDate : 'NA' }}</td>
                  <td>{{ config.endDate ? config.endDate : 'NA' }}</td>
                  <td>{{ config.reason ? config.reason : 'NA' }}</td>
                  <td>
             
               <!--  <button type="button" class="btn btn-info btn-sm" [attr.data-target]="config.isStatus === 1 ? '#myModal' : (config.isStatus === 2 ? '#myModal2' : null)" data-toggle="modal">
                      {{ config.isStatus === 1 ? 'Active' : 'Deactive' }}
                   </button>-->

            <!--   <button type="button" class="btn btn-info btn-sm" 
                 [attr.data-target]="config.isStatus === 1 ? '#myModal' : (config.isStatus === 2 ? '#myModal2' : null)" 
                 data-toggle="modal" (click)="editConfigrationData(config?.InspectionConfigrationId)">
                {{ config.isStatus === 1 ? 'Active' : 'Deactive' }}
               </button> -->

               <button type="button" class="btn btn-info btn-sm" 
               data-target="#myModal" data-toggle="modal" (click)="editConfigrationData(config?.InspectionConfigrationId)">
                {{ config.isStatus === 1 ? 'Active' : 'Deactive' }}
              </button>

                </td>
                  
                  
                 <td>
               <!--  <a title="Edit"  [routerLink]="['/edit/configrationData',
                      config?.InspectionConfigrationId
                    ]"
                    class="edit-btn me-2">
                    <i class="bi bi-pencil-square text-primary"></i>
                  </a> -->

                  <a title="Delete" class="delete-btn me-2"
                    style="cursor: pointer"
                    (click)="
                      deleteConfigration(config?.InspectionConfigrationId)
                    "
                    ><i class="bi bi-trash"></i
                  ></a>
                </td>
                </tr>
              </tbody>
            </table>
            </div>
        </div>
    </div>
</div>


<!-- Modal -->
<!--
<div class="modal fade" id="myModal" role="dialog" tabindex="-1" #myModal>

  <div class="modal-dialog">
    <form #inspectionForm="ngForm">
     <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Update Status</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        
      </div>
      
      <div class="modal-body">
        <div *ngIf="config.isStatus === 1">
          <label>Module Name</label>
          <input type="text" class="form-control" name="moduleName" [(ngModel)]="formData.moduleName" (keypress)="CharOnly($event)">
        </div>

        <div>
          <label>Status</label>
          <select class="form-control" id="isStatus" name="isStatus" [(ngModel)]="formData.isStatus" (change)="onStatusChange()" required>
            <option value="" selected>---Select Status---</option>
            <option value="1">Active</option>
            <option value="2">Deactive</option>
          </select>
        </div>

        <div>
          <label for="startDate">Start Date</label>
          <input type="date" id="startDate" name="startDate" [(ngModel)]="formData.startDate" class="form-control">
        </div>
        <div>
          <label for="startDate">End Date</label>
          <input type="date" id="endDate" name="endDate" [(ngModel)]="formData.endDate" class="form-control">
        </div>

        <div  *ngIf="config.isStatus === 2">
          <label for="isDeactive" class="col-md-3 col-form-label">Reason for Deactivation</label>
          <div class="col-md-4">
            <textarea class="form-control"  name="reason" [(ngModel)]="formData.reason" rows="4" required></textarea>
            <small>Maximum <span class="text-danger">(500)</span> Characters</small>
          </div>
        </div>
        
        
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-success" (click)="onSubmit('myModal')">Update</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>
    
</div>
</form>
  </div>
</div>
-->

<div class="modal fade" id="myModal" role="dialog" tabindex="-1" #myModal>
  <div class="modal-dialog">
    <form #inspectionForm="ngForm">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Update Status</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
          <div>
            <label>Module Name</label>
            <input type="text" class="form-control" name="moduleName" [(ngModel)]="formData.moduleName" (keypress)="CharOnly($event)">
          </div>

          <div>
            <label>Status</label>
            <select class="form-control" id="isStatus" name="isStatus" [(ngModel)]="formData.isStatus" (change)="onStatusChange()" required>
              <option value="" selected>---Select Status---</option>
              <option value=1>Active</option>
              <option value=2>Deactive</option>
            </select>
          </div>

          <div *ngIf="formData.isStatus == 1">
            <label>Start Date</label>
            <input type="date" id="startDate" name="startDate" [(ngModel)]="formData.startDate" class="form-control">
            
            <label>End Date</label>
            <input type="date" id="endDate" name="endDate" [(ngModel)]="formData.endDate" class="form-control">
          </div>
          <div *ngIf="formData.isStatus == 2">
            <label>Reason for Deactivation</label>
            <textarea class="form-control" name="reason" [(ngModel)]="formData.reason" rows="4" required></textarea>
            <small>Maximum <span class="text-danger">(500)</span> Characters</small>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-success" (click)="onSubmit('myModal')">Update</button>
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
      </div>
    </form>
  </div>
</div>


<!--<div class="modal fade" id="myModal2" role="dialog">-->

  <div class="modal fade" id="myModal2" role="dialog" tabindex="-1" #myModal2>

  <div class="modal-dialog">
  
    <form #inspectionForm="ngForm">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title text-center">Update Status</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        
      </div>
      <div class="modal-body">
        <div >
          <label>Reason:</label>
          <textarea class="form-control"  name="reason"  [(ngModel)]="formData.reason" rows="4" required></textarea>
           <small>Maximum <span class="text-danger">(500)</span> Characters</small>
        </div>
        
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-success" (click)="onSubmit('myModal2')">Update</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
    </form>
  </div>
</div>
<ngx-spinner bdColor="rgba(7,1,1,0.95)" size="small" type="pacman">
  <p style="color: white">Loading Please Wait... </p>
</ngx-spinner>

</body>
</html>
